#NameVirtualHost *:80
<VirtualHost *:80>
ServerName lofyer.org
ServerAlias www.lofyer.org
DocumentRoot /var/www
RewriteEngine on
# disable other dns
RewriteCond %{HTTP_HOST} !^www.lofyer.org [NC]
RewriteCond %{HTTP_HOST} !^lofyer.org [NC]
RewriteCond %{HTTP_HOST} !^69.164.197.168 [NC]
RewriteRule ^(.*) http://127.0.0.1 [R=301,L]
# lofyer.org->blog.lofyer.org
RewriteCond %{HTTP_HOST} ^lofyer.org  [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*) http://blog.lofyer.org$1 [R=permanent,L]
</VirtualHost>

<VirtualHost *:80>
ServerName blog.lofyer.org
ServerAlias blog.lofyer.org
DocumentRoot /var/www
</VirtualHost>

<VirtualHost *:80>
ServerName cloud.lofyer.org
ServerAlias cloud.lofyer.org
DocumentRoot /mysite/owncloud
</VirtualHost>

<VirtualHost *:80>                                       
    ServerName git.lofyer.org
    ServerAlias git.lofyer.org
    DocumentRoot "/mysite/cgit"
    DirectoryIndex cgit.cgi
    SetEnv  CGIT_CONFIG   /etc/cgitrc
    Alias /cgit.css /mysite/cgit/cgit.css
    Alias /cgit.png /mysite/cgit/cgit.png

    <Directory "/mysite/cgit">
	Options Indexes FollowSymLinks
	Options +ExecCGI
	Order allow,deny
	Allow from all
	AddHandler cgi-script .cgi
	DirectoryIndex cgit.cgi
    </Directory>

    <Directory "/home/git">
        Allow from all
    </Directory>

# To debug rewrite just enable them.
#    RewriteLog /var/log/httpd/rewrite_log
#    RewriteLogLevel 9
#    ErrorLog /var/log/httpd/gitweb
</VirtualHost>

#<VirtualHost *:80>
#ServerName lofyer.org
#ServerAlias *.lofyer.org lofyer.org
#DocumentRoot /var/www
#</VirtualHost>
